<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2-5. パフォーマンス | アーキテクチャ学習ランド</title>
  <link rel="stylesheet" href="../../css/style.css">
  <link rel="stylesheet" href="../../css/components.css">
  <link rel="stylesheet" href="../../css/responsive.css">
</head>
<body data-phase="2">
  <header class="site-header">
    <div class="container">
      <a href="../../index.html" class="site-logo"><span class="owl-icon">🦉</span><span>アーキテクチャ学習ランド</span></a>
      <button class="nav-toggle" aria-label="メニューを開く" aria-expanded="false">☰</button>
      <nav><ul class="nav-links">
        <li><a href="../../index.html">ホーム</a></li>
        <li><a href="../phase1/index.html">Phase 1</a></li>
        <li><a href="index.html" class="active">Phase 2</a></li>
        <li><a href="../phase3/index.html">Phase 3</a></li>
        <li><a href="../phase4/index.html">Phase 4</a></li>
        <li><a href="../phase5/index.html">Phase 5</a></li>
      </ul></nav>
    </div>
  </header>

  <main class="phase-page">
    <div class="container">
      <nav class="breadcrumb" aria-label="パンくずリスト">
        <a href="../../index.html">ホーム</a><span class="separator">/</span>
        <a href="index.html">Phase 2</a><span class="separator">/</span>
        <span class="current">2-5. パフォーマンス</span>
      </nav>

      <div class="phase-header">
        <h1><span class="phase-icon">🛡️</span>2-5. パフォーマンス</h1>
      </div>

      <div class="owl-box owl-intro">
        <div class="owl-box-content">
          <p class="owl-box-title">フクロウ先生の導入</p>
          <p>スーパーのレジを想像してください。「レジ1台の処理速度」と「レジの台数」、お客さんが快適に買い物できるかはこの2つで決まりますよね。システムのパフォーマンスもまったく同じ。<span class="tech-term">レスポンスタイム<span class="tooltip">リクエストを送ってから結果が返ってくるまでの時間。「レジ1台の処理速度」にあたる</span></span>（1つの処理の速さ）と<span class="tech-term">スループット<span class="tooltip">一定時間内に処理できるリクエストの数。「レジの台数 × 処理速度」にあたる</span></span>（単位時間あたりの処理量）——この2つの違いを理解すると、パフォーマンスの話がスッと入ってきます。</p>
        </div>
      </div>

      <section>
        <h2>レスポンスタイムとスループット——「レジの速さ」と「レジの数」</h2>

        <div class="table-wrapper">
          <table class="comparison-table">
            <thead>
              <tr>
                <th>指標</th>
                <th>レジのたとえ</th>
                <th>システムでの意味</th>
                <th>単位</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>レスポンスタイム</strong></td>
                <td>レジ1台がお客さん1人を処理する時間</td>
                <td>1リクエストに対する応答時間</td>
                <td>ミリ秒（ms）、秒（s）</td>
              </tr>
              <tr>
                <td><strong>スループット</strong></td>
                <td>1時間に全レジで処理できるお客さんの数</td>
                <td>一定時間に処理できるリクエスト数</td>
                <td>リクエスト/秒（rps）</td>
              </tr>
            </tbody>
          </table>
        </div>

        <p>レジ1台が速くても、レジが1台しかなければ行列ができます。逆にレジが10台あっても、各レジが遅ければやっぱり待たされる。<strong>両方のバランス</strong>が大切です。</p>
      </section>

      <section>
        <h2>「3秒ルール」——ユーザーの忍耐限界</h2>

        <p>Webサイトやアプリで広く知られる経験則があります。</p>

        <div class="table-wrapper">
          <table class="comparison-table">
            <thead>
              <tr>
                <th>表示時間</th>
                <th>ユーザーの反応</th>
                <th>ビジネスへの影響</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>1秒以内</strong></td>
                <td>快適。集中力が途切れない</td>
                <td>理想的なユーザー体験</td>
              </tr>
              <tr>
                <td><strong>1〜3秒</strong></td>
                <td>「まあ許容範囲」と感じる</td>
                <td>一般的なビジネスシステムの目標ライン</td>
              </tr>
              <tr>
                <td><strong>3秒超</strong></td>
                <td>約半数が離脱を検討し始める</td>
                <td>ECサイトなら売上に直結するダメージ</td>
              </tr>
              <tr>
                <td><strong>5秒超</strong></td>
                <td>大多数が「遅い」と感じ離脱</td>
                <td>クレーム発生。システムへの不満が蓄積</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="owl-box owl-point">
          <div class="owl-box-content">
            <p class="owl-box-title">ポイント</p>
            <p>ECサイトでは<strong>表示速度が1秒遅くなるとコンバージョン率が7%低下する</strong>という調査結果もあります。パフォーマンスは「技術の話」ではなく「売上の話」。お客様にはこの観点で説明すると理解を得やすいです。</p>
          </div>
        </div>
      </section>

      <section>
        <h2>パフォーマンスを上げる3つの基本手法</h2>

        <h3>1. キャッシュ——「よく使う食材は手元に置く」</h3>
        <p><span class="tech-term">キャッシュ<span class="tooltip">頻繁にアクセスされるデータを、アクセスの速い場所に一時的に保存しておく仕組み。毎回DBに問い合わせる必要がなくなる</span></span>は、よく使うデータを「近い場所」に一時保存する仕組み。レストランで言えば、よく使う調味料を棚から毎回取りに行くのではなく、調理台に置いておくようなもの。</p>
        <ul>
          <li><strong>ブラウザキャッシュ</strong>：ユーザーのブラウザに画像やCSS等を保存。2回目以降の表示が速くなる</li>
          <li><strong>サーバーキャッシュ</strong>：データベースへの問い合わせ結果をメモリに保存。Redis、Memcachedなどが代表的</li>
        </ul>

        <h3>2. CDN——「全国に配送拠点を作る」</h3>
        <p><span class="tech-term">CDN<span class="tooltip">Content Delivery Network。世界中に分散されたサーバーから、ユーザーに最も近いサーバーでコンテンツを配信する仕組み</span></span>は、コンテンツを世界中のサーバーに分散配置し、ユーザーに一番近いサーバーから配信する仕組み。北海道のユーザーには北海道のサーバーから、沖縄のユーザーには沖縄のサーバーから。距離が近いほど速くなります。</p>

        <h3>3. 負荷分散——「レジを増やす」</h3>
        <p><span class="tech-term">ロードバランサー<span class="tooltip">複数のサーバーにリクエストを分配する装置・仕組み。特定のサーバーに負荷が集中するのを防ぐ</span></span>は、お客さんを空いているレジに案内する「誘導係」。複数のサーバーにリクエストを均等に振り分けて、特定のサーバーに負荷が集中するのを防ぎます。</p>

        <div class="table-wrapper">
          <table class="comparison-table">
            <thead>
              <tr>
                <th>手法</th>
                <th>効果</th>
                <th>コスト</th>
                <th>お客様への説明</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>キャッシュ</strong></td>
                <td>繰り返しアクセスが大幅高速化</td>
                <td>低〜中</td>
                <td>「よく見られるページを高速化します」</td>
              </tr>
              <tr>
                <td><strong>CDN</strong></td>
                <td>地理的な距離による遅延を解消</td>
                <td>低〜中</td>
                <td>「全国どこからアクセスしても速くなります」</td>
              </tr>
              <tr>
                <td><strong>負荷分散</strong></td>
                <td>大量アクセスに対応、障害耐性も向上</td>
                <td>中〜高</td>
                <td>「アクセス集中時でも遅くなりません」</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section>
        <h2>パフォーマンス要件の聞き方</h2>

        <p>お客様にパフォーマンスの話を聞くとき、以下の4つを確認しましょう。</p>

        <ol>
          <li><strong>同時ユーザー数</strong>：「このシステムを同時に使うのは何人くらいですか？」</li>
          <li><strong>ピーク時間帯</strong>：「一番アクセスが多い時間帯や時期はいつですか？」</li>
          <li><strong>許容応答時間</strong>：「画面が何秒以内に表示されれば業務に支障がないですか？」</li>
          <li><strong>データ量</strong>：「処理するデータ（帳票、検索対象など）はどのくらいの量ですか？」</li>
        </ol>
      </section>

      <!-- 営業コラム -->
      <div class="column-sales">
        <p class="column-title">営業の現場では...</p>
        <p>お客様が「今のシステムは遅い」と不満を持っているケースは非常に多いです。このとき「具体的にどの画面が何秒かかっていますか？」と聞けると、問題を特定しやすくなります。「検索が30秒かかる」のと「ログインに5秒かかる」では対策がまったく違います。また、パフォーマンス改善は<strong>ビジネスインパクト</strong>で語ると響きます。「ECサイトの表示が1秒速くなれば、コンバージョン率が7%向上する可能性があります」——この一言で投資の正当性を示せます。</p>
      </div>

      <!-- 開発チームコラム -->
      <div class="column-dev">
        <p class="column-title">開発チームの視点</p>
        <p>パフォーマンス設計で開発チームが困るのは「遅い」とだけ言われること。「何が遅いのか」「どのくらいなら許容できるか」が明確でないと対策が立てられません。営業さんにお願いしたいのは<strong>具体的な数字</strong>を聞くこと。「現行は検索に10秒、目標は3秒以内」——こういう情報があれば、キャッシュで解決できるか、データベースのチューニングが必要か、すぐに方針が立てられます。</p>
      </div>

      <!-- クイズ -->
      <h2>理解度チェック</h2>

      <div class="quiz-card" data-answer="C" data-phase="phase2" data-topic="performance">
        <div class="quiz-card-header"><div class="quiz-icon">Q1</div><h4>レスポンスタイムとスループット</h4></div>
        <p class="quiz-question">「レジの台数」にあたるパフォーマンス指標はどれですか？</p>
        <ul class="quiz-options">
          <li class="quiz-option" data-option="A"><span class="option-label">A</span><span>レスポンスタイム</span></li>
          <li class="quiz-option" data-option="B"><span class="option-label">B</span><span>SLA</span></li>
          <li class="quiz-option" data-option="C"><span class="option-label">C</span><span>スループット</span></li>
          <li class="quiz-option" data-option="D"><span class="option-label">D</span><span>RPO</span></li>
        </ul>
        <div class="quiz-feedback"><p class="feedback-title"></p></div>
        <div class="quiz-explanation"><p>「レジの台数」＝単位時間あたりに処理できる量なので<strong>スループット</strong>です。レスポンスタイムは「レジ1台の処理速度」にあたります。SLAは稼働率の保証、RPOは災害復旧の指標で、パフォーマンスとは別の概念です。</p></div>
        <button class="btn btn-outline quiz-retry" style="display: none;">もう一度挑戦する</button>
      </div>

      <div class="quiz-card" data-answer="B" data-phase="phase2" data-topic="performance">
        <div class="quiz-card-header"><div class="quiz-icon">Q2</div><h4>3秒ルール</h4></div>
        <p class="quiz-question">Webページの表示が3秒を超えると、一般的にどうなると言われていますか？</p>
        <ul class="quiz-options">
          <li class="quiz-option" data-option="A"><span class="option-label">A</span><span>SEOの順位が上がる</span></li>
          <li class="quiz-option" data-option="B"><span class="option-label">B</span><span>ユーザーの約半数が離脱を検討する</span></li>
          <li class="quiz-option" data-option="C"><span class="option-label">C</span><span>サーバーが自動的にキャッシュを作成する</span></li>
          <li class="quiz-option" data-option="D"><span class="option-label">D</span><span>特に影響はない</span></li>
        </ul>
        <div class="quiz-feedback"><p class="feedback-title"></p></div>
        <div class="quiz-explanation"><p>「3秒ルール」とは、Webページの表示に3秒以上かかると<strong>約半数のユーザーが離脱を検討する</strong>という経験則です。ECサイトでは売上に直結する問題。パフォーマンスは「技術の話」ではなく「ビジネスの話」として提案するのがポイントです。</p></div>
        <button class="btn btn-outline quiz-retry" style="display: none;">もう一度挑戦する</button>
      </div>

      <div class="quiz-card" data-answer="D" data-phase="phase2" data-topic="performance">
        <div class="quiz-card-header"><div class="quiz-icon">Q3</div><h4>CDNの役割</h4></div>
        <p class="quiz-question">CDNが解決する問題として最も適切なものはどれですか？</p>
        <ul class="quiz-options">
          <li class="quiz-option" data-option="A"><span class="option-label">A</span><span>データベースの処理が遅い</span></li>
          <li class="quiz-option" data-option="B"><span class="option-label">B</span><span>パスワードの管理が煩雑</span></li>
          <li class="quiz-option" data-option="C"><span class="option-label">C</span><span>バックアップが取れていない</span></li>
          <li class="quiz-option" data-option="D"><span class="option-label">D</span><span>ユーザーとサーバーの地理的距離による表示遅延</span></li>
        </ul>
        <div class="quiz-feedback"><p class="feedback-title"></p></div>
        <div class="quiz-explanation"><p>CDNは世界中に分散配置されたサーバーから、<strong>ユーザーに最も近い場所でコンテンツを配信</strong>する仕組みです。東京のサーバーに北海道や沖縄からアクセスする際の地理的な遅延を解消します。データベースの遅延やバックアップの問題はCDNでは解決できません。</p></div>
        <button class="btn btn-outline quiz-retry" style="display: none;">もう一度挑戦する</button>
      </div>

      <!-- 振り返り -->
      <div class="owl-box owl-encourage">
        <div class="owl-box-content">
          <p class="owl-box-title">フクロウ先生の振り返り</p>
          <p>パフォーマンスの基本、レジのたとえでスッキリ理解できましたか？「レスポンスタイムとスループットの違い」「3秒ルール」「キャッシュ・CDN・負荷分散」——この3つを押さえていれば、お客様の「遅い」という不満に具体的に応えられます。次はPhase 2の最後、「コスト構造と運用保守」。お金の話は営業の得意分野ですよね！</p>
        </div>
      </div>

      <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 2rem; flex-wrap: wrap; gap: 1rem;">
        <a href="04-security.html" class="btn btn-outline">← 前のトピック</a>
        <a href="06-cost-structure.html" class="btn btn-primary">次のトピック：コスト構造と運用保守 →</a>
      </div>
    </div>
  </main>

  <footer class="site-footer"><div class="container"><p>学習の進捗は自動保存されます 🦉</p><p>アーキテクチャ学習ランド &copy; 2025</p></div></footer>
  <script src="../../js/progress.js"></script>
  <script src="../../js/app.js"></script>
  <script>ProgressManager.initScrollTracking('phase2', 'performance');</script>
</body>
</html>
